{% load custom_filters %}

<style>
#map {
    height: calc(100vh - 57px);
    width: 100%;
    margin: 0;
    padding: 0;
    border: none;
    border-radius: 0;
}

#map-container {
    margin-bottom: 2rem;
}

#map {
    height: 500px;
    width: 100%;
    border-radius: 0.5rem;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    margin: 0;
    padding: 0;
    border: none;
}

section.content {
    padding: 0 !important;
}

.content-wrapper {
    padding: 0 !important;
}

.container-fluid {
    padding: 0 !important;
}

.callout {
    padding: 1.25rem;
    border-radius: 0.5rem;
    margin-bottom: 1rem;
    background: white;
    box-shadow: 0 2px 15px rgba(0,0,0,0.05);
    transition: transform 0.2s, box-shadow 0.2s;
    border-left: 4px solid;
}

.callout:hover {
    transform: translateY(-5px);
    box-shadow: 0 5px 20px rgba(0,0,0,0.1);
}

.callout-primary { border-color: #4e73df; }
.callout-success { border-color: #1cc88a; }
.callout-info { border-color: #36b9cc; }
.callout-warning { border-color: #f6c23e; }
.callout-danger { border-color: #e74a3b; }
.callout-dark { border-color: #5a5c69; }

.callout-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 0.5rem;
}

.callout-title {
    font-size: 0.8rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    margin: 0;
}

.callout-icon {
    font-size: 1.5rem;
    opacity: 0.7;
}

.callout-value {
    font-size: 1.5rem;
    font-weight: 600;
    margin: 0;
}

.callout-primary .callout-title { color: #4e73df; }
.callout-success .callout-title { color: #1cc88a; }
.callout-info .callout-title { color: #36b9cc; }
.callout-warning .callout-title { color: #f6c23e; }
.callout-danger .callout-title { color: #e74a3b; }
.callout-dark .callout-title { color: #5a5c69; }

.indicator-section {
    margin-top: 2rem;
}

.indicator-section-title {
    font-size: 1.2rem;
    font-weight: 600;
    margin-bottom: 1.5rem;
    padding-bottom: 0.5rem;
    border-bottom: 2px solid #eaecf4;
}

/* Ajusta o mapa quando o sidebar está fechado */
body.sidebar-collapse #map {
    left: 0rem; /* Largura do sidebar quando fechado */
}
</style>

<!-- 1. Indicadores de Produção -->
<div class="indicator-section">
    <h5 class="indicator-section-title">Indicadores de Produção</h5>
    <div class="row">
        <div class="col-xl-3 col-md-6">
            <div class="callout callout-primary">
                <div class="callout-header">
                    <h6 class="callout-title">Produção de @ Totais</h6>
                    <i class="fas fa-chart-line callout-icon"></i>
                </div>
                <p class="callout-value">{{ producao_arroba_total|default:"0" }}</p>
            </div>
        </div>

        <div class="col-xl-3 col-md-6">
            <div class="callout callout-primary">
                <div class="callout-header">
                    <h6 class="callout-title">@produzidas/ha/ano</h6>
                    <i class="fas fa-chart-area callout-icon"></i>
                </div>
                <p class="callout-value">{{ arroba_ha_ano|default:"0" }}</p>
            </div>
        </div>

        <div class="col-xl-3 col-md-6">
            <div class="callout callout-primary">
                <div class="callout-header">
                    <h6 class="callout-title">Produção kg Peso Vivo</h6>
                    <i class="fas fa-weight callout-icon"></i>
                </div>
                <p class="callout-value">{{ producao_kg_peso_vivo|default:"0" }} kg</p>
            </div>
        </div>

        <div class="col-xl-3 col-md-6">
            <div class="callout callout-primary">
                <div class="callout-header">
                    <h6 class="callout-title">GMD Global</h6>
                    <i class="fas fa-chart-bar callout-icon"></i>
                </div>
                <p class="callout-value">{{ gmd_global|default:"0" }} kg/dia</p>
            </div>
        </div>

        <div class="col-xl-3 col-md-6">
            <div class="callout callout-primary">
                <div class="callout-header">
                    <h6 class="callout-title">Taxa de Venda e Abates</h6>
                    <i class="fas fa-percentage callout-icon"></i>
                </div>
                <p class="callout-value">{{ taxa_venda_abates|default:"0" }}%</p>
            </div>
        </div>

        <div class="col-xl-3 col-md-6">
            <div class="callout callout-primary">
                <div class="callout-header">
                    <h6 class="callout-title">Taxa de Desfrute</h6>
                    <i class="fas fa-percentage callout-icon"></i>
                </div>
                <p class="callout-value">{{ taxa_desfrute|default:"0" }}%</p>
            </div>
        </div>
    </div>
</div>

<!-- 2. Indicadores Reprodutivos -->
<div class="indicator-section">
    <h5 class="indicator-section-title">Indicadores Reprodutivos</h5>
    <div class="row">
        <div class="col-xl-3 col-md-6">
            <div class="callout callout-success">
                <div class="callout-header">
                    <h6 class="callout-title">Total em Cobertura</h6>
                    <i class="fas fa-cow callout-icon"></i>
                </div>
                <p class="callout-value">{{ total_cobertura|default:"0" }}</p>
            </div>
        </div>

        <div class="col-xl-3 col-md-6">
            <div class="callout callout-success">
                <div class="callout-header">
                    <h6 class="callout-title">Total Prenhes</h6>
                    <i class="fas fa-venus callout-icon"></i>
                </div>
                <p class="callout-value">{{ total_prenhes|default:"0" }}</p>
            </div>
        </div>

        <div class="col-xl-3 col-md-6">
            <div class="callout callout-success">
                <div class="callout-header">
                    <h6 class="callout-title">Total de Nascimentos</h6>
                    <i class="fas fa-baby callout-icon"></i>
                </div>
                <p class="callout-value">{{ total_nascimentos|default:"0" }}</p>
            </div>
        </div>

        <div class="col-xl-3 col-md-6">
            <div class="callout callout-success">
                <div class="callout-header">
                    <h6 class="callout-title">Doses de Sêmens Gastas</h6>
                    <i class="fas fa-vial callout-icon"></i>
                </div>
                <p class="callout-value">{{ doses_semen|default:"0" }}</p>
            </div>
        </div>

        <div class="col-xl-3 col-md-6">
            <div class="callout callout-success">
                <div class="callout-header">
                    <h6 class="callout-title">Matrizes Prenhes</h6>
                    <i class="fas fa-venus callout-icon"></i>
                </div>
                <p class="callout-value">{{ matrizes_prenhes|default:"0" }}</p>
            </div>
        </div>

        <div class="col-xl-3 col-md-6">
            <div class="callout callout-success">
                <div class="callout-header">
                    <h6 class="callout-title">Peso ao Desmame Machos</h6>
                    <i class="fas fa-weight callout-icon"></i>
                </div>
                <p class="callout-value">{{ peso_desmame_machos|default:"0" }} kg</p>
            </div>
        </div>

        <div class="col-xl-3 col-md-6">
            <div class="callout callout-success">
                <div class="callout-header">
                    <h6 class="callout-title">Peso ao Desmame Fêmeas</h6>
                    <i class="fas fa-weight callout-icon"></i>
                </div>
                <p class="callout-value">{{ peso_desmame_femeas|default:"0" }} kg</p>
            </div>
        </div>

        <div class="col-xl-3 col-md-6">
            <div class="callout callout-success">
                <div class="callout-header">
                    <h6 class="callout-title">Fertilidade Geral</h6>
                    <i class="fas fa-percentage callout-icon"></i>
                </div>
                <p class="callout-value">{{ fertilidade_geral|default:"0" }}%</p>
            </div>
        </div>

        <div class="col-xl-3 col-md-6">
            <div class="callout callout-success">
                <div class="callout-header">
                    <h6 class="callout-title">Índice de Serviço</h6>
                    <i class="fas fa-chart-line callout-icon"></i>
                </div>
                <p class="callout-value">{{ indice_servico|default:"0" }}</p>
            </div>
        </div>

        <div class="col-xl-3 col-md-6">
            <div class="callout callout-success">
                <div class="callout-header">
                    <h6 class="callout-title">Perda pré parto</h6>
                    <i class="fas fa-exclamation-triangle callout-icon"></i>
                </div>
                <p class="callout-value">{{ perda_pre_parto|default:"0" }}%</p>
            </div>
        </div>

        <div class="col-xl-3 col-md-6">
            <div class="callout callout-success">
                <div class="callout-header">
                    <h6 class="callout-title">Mortalidade de Bezerros</h6>
                    <i class="fas fa-heartbeat callout-icon"></i>
                </div>
                <p class="callout-value">{{ mortalidade_bezerros|default:"0" }}%</p>
            </div>
        </div>

        <div class="col-xl-3 col-md-6">
            <div class="callout callout-success">
                <div class="callout-header">
                    <h6 class="callout-title">Perda pré-desmame</h6>
                    <i class="fas fa-exclamation-triangle callout-icon"></i>
                </div>
                <p class="callout-value">{{ perda_pre_desmame|default:"0" }}%</p>
            </div>
        </div>

        <div class="col-xl-3 col-md-6">
            <div class="callout callout-success">
                <div class="callout-header">
                    <h6 class="callout-title">Taxa de Desmame</h6>
                    <i class="fas fa-percentage callout-icon"></i>
                </div>
                <p class="callout-value">{{ taxa_desmame|default:"0" }}%</p>
            </div>
        </div>

        <div class="col-xl-3 col-md-6">
            <div class="callout callout-success">
                <div class="callout-header">
                    <h6 class="callout-title">Relação de desmame</h6>
                    <i class="fas fa-balance-scale callout-icon"></i>
                </div>
                <p class="callout-value">{{ relacao_desmame|default:"0" }}</p>
            </div>
        </div>

        <div class="col-xl-3 col-md-6">
            <div class="callout callout-success">
                <div class="callout-header">
                    <h6 class="callout-title">Quilos Desmamados/Vaca</h6>
                    <i class="fas fa-weight callout-icon"></i>
                </div>
                <p class="callout-value">{{ quilos_desmamados_vaca|default:"0" }} kg</p>
            </div>
        </div>
    </div>
</div>

<!-- 3. Indicadores de Confinamento -->
<div class="indicator-section">
    <h5 class="indicator-section-title">Indicadores de Confinamento</h5>
    <div class="row">
        <div class="col-xl-3 col-md-6">
            <div class="callout callout-info">
                <div class="callout-header">
                    <h6 class="callout-title">Idade ao Abate</h6>
                    <i class="fas fa-calendar-alt callout-icon"></i>
                </div>
                <p class="callout-value">{{ idade_abate|default:"0" }} meses</p>
            </div>
        </div>

        <div class="col-xl-3 col-md-6">
            <div class="callout callout-info">
                <div class="callout-header">
                    <h6 class="callout-title">Peso Entrada Confinamento</h6>
                    <i class="fas fa-weight callout-icon"></i>
                </div>
                <p class="callout-value">{{ peso_entrada_confinamento|default:"0" }} kg</p>
            </div>
        </div>

        <div class="col-xl-3 col-md-6">
            <div class="callout callout-info">
                <div class="callout-header">
                    <h6 class="callout-title">Peso Saída Confinamento</h6>
                    <i class="fas fa-weight callout-icon"></i>
                </div>
                <p class="callout-value">{{ peso_saida_confinamento|default:"0" }} kg</p>
            </div>
        </div>

        <div class="col-xl-3 col-md-6">
            <div class="callout callout-info">
                <div class="callout-header">
                    <h6 class="callout-title">Peso Morto Médio</h6>
                    <i class="fas fa-weight callout-icon"></i>
                </div>
                <p class="callout-value">{{ peso_morto_medio|default:"0" }} kg</p>
            </div>
        </div>

        <div class="col-xl-3 col-md-6">
            <div class="callout callout-info">
                <div class="callout-header">
                    <h6 class="callout-title">Tempo Permanência Médio</h6>
                    <i class="fas fa-clock callout-icon"></i>
                </div>
                <p class="callout-value">{{ tempo_permanencia|default:"0" }} dias</p>
            </div>
        </div>

        <div class="col-xl-3 col-md-6">
            <div class="callout callout-info">
                <div class="callout-header">
                    <h6 class="callout-title">GMD Global "Machos"</h6>
                    <i class="fas fa-chart-line callout-icon"></i>
                </div>
                <p class="callout-value">{{ gmd_global_machos|default:"0" }} kg/dia</p>
            </div>
        </div>

        <div class="col-xl-3 col-md-6">
            <div class="callout callout-info">
                <div class="callout-header">
                    <h6 class="callout-title">GMD em confinamento</h6>
                    <i class="fas fa-chart-line callout-icon"></i>
                </div>
                <p class="callout-value">{{ gmd_confinamento|default:"0" }} kg/dia</p>
            </div>
        </div>

        <div class="col-xl-3 col-md-6">
            <div class="callout callout-info">
                <div class="callout-header">
                    <h6 class="callout-title">Ganho Carcaça Líquido</h6>
                    <i class="fas fa-balance-scale callout-icon"></i>
                </div>
                <p class="callout-value">{{ ganho_carcaca|default:"0" }} kg</p>
            </div>
        </div>

        <div class="col-xl-3 col-md-6">
            <div class="callout callout-info">
                <div class="callout-header">
                    <h6 class="callout-title">Rendimento do Ganho</h6>
                    <i class="fas fa-percentage callout-icon"></i>
                </div>
                <p class="callout-value">{{ rendimento_ganho|default:"0" }}%</p>
            </div>
        </div>
    </div>
</div>

<!-- 4. Indicadores Financeiros -->
<div class="indicator-section">
    <h5 class="indicator-section-title">Indicadores Financeiros</h5>
    <div class="row">
        <div class="col-xl-3 col-md-6">
            <div class="callout callout-warning">
                <div class="callout-header">
                    <h6 class="callout-title">Valor de venda/@</h6>
                    <i class="fas fa-dollar-sign callout-icon"></i>
                </div>
                <p class="callout-value">R$ {{ valor_venda_arroba|default:"0"|floatformat:2 }}</p>
            </div>
        </div>

        <div class="col-xl-3 col-md-6">
            <div class="callout callout-warning">
                <div class="callout-header">
                    <h6 class="callout-title">Peso boi</h6>
                    <i class="fas fa-weight callout-icon"></i>
                </div>
                <p class="callout-value">{{ peso_boi|default:"0" }} kg</p>
            </div>
        </div>

        <div class="col-xl-3 col-md-6">
            <div class="callout callout-warning">
                <div class="callout-header">
                    <h6 class="callout-title">Desembolso/boi</h6>
                    <i class="fas fa-money-bill-wave callout-icon"></i>
                </div>
                <p class="callout-value">R$ {{ desembolso_boi|default:"0"|floatformat:2 }}</p>
            </div>
        </div>

        <div class="col-xl-3 col-md-6">
            <div class="callout callout-warning">
                <div class="callout-header">
                    <h6 class="callout-title">Resultado/boi</h6>
                    <i class="fas fa-calculator callout-icon"></i>
                </div>
                <p class="callout-value">R$ {{ resultado_boi|default:"0"|floatformat:2 }}</p>
            </div>
        </div>

        <div class="col-xl-3 col-md-6">
            <div class="callout callout-warning">
                <div class="callout-header">
                    <h6 class="callout-title">Desembolso/@ Produzida</h6>
                    <i class="fas fa-money-bill-wave callout-icon"></i>
                </div>
                <p class="callout-value">R$ {{ desembolso_arroba|default:"0"|floatformat:2 }}</p>
            </div>
        </div>

        <div class="col-xl-3 col-md-6">
            <div class="callout callout-warning">
                <div class="callout-header">
                    <h6 class="callout-title">Resultado/@ Final</h6>
                    <i class="fas fa-calculator callout-icon"></i>
                </div>
                <p class="callout-value">R$ {{ resultado_arroba_final|default:"0"|floatformat:2 }}</p>
            </div>
        </div>

        <div class="col-xl-3 col-md-6">
            <div class="callout callout-warning">
                <div class="callout-header">
                    <h6 class="callout-title">Margem @ Final</h6>
                    <i class="fas fa-percentage callout-icon"></i>
                </div>
                <p class="callout-value">{{ margem_arroba_final|default:"0" }}%</p>
            </div>
        </div>

        <div class="col-xl-3 col-md-6">
            <div class="callout callout-warning">
                <div class="callout-header">
                    <h6 class="callout-title">ROI</h6>
                    <i class="fas fa-chart-pie callout-icon"></i>
                </div>
                <p class="callout-value">{{ roi|default:"0" }}%</p>
            </div>
        </div>

        <div class="col-xl-3 col-md-6">
            <div class="callout callout-warning">
                <div class="callout-header">
                    <h6 class="callout-title">Receita Total</h6>
                    <i class="fas fa-money-bill-wave callout-icon"></i>
                </div>
                <p class="callout-value">R$ {{ receita_total|default:"0"|floatformat:2 }}</p>
            </div>
        </div>

        <div class="col-xl-3 col-md-6">
            <div class="callout callout-warning">
                <div class="callout-header">
                    <h6 class="callout-title">Despesas Operacionais</h6>
                    <i class="fas fa-file-invoice-dollar callout-icon"></i>
                </div>
                <p class="callout-value">R$ {{ despesas_operacionais|default:"0"|floatformat:2 }}</p>
            </div>
        </div>

        <div class="col-xl-3 col-md-6">
            <div class="callout callout-warning">
                <div class="callout-header">
                    <h6 class="callout-title">Reposição</h6>
                    <i class="fas fa-sync callout-icon"></i>
                </div>
                <p class="callout-value">R$ {{ reposicao|default:"0"|floatformat:2 }}</p>
            </div>
        </div>

        <div class="col-xl-3 col-md-6">
            <div class="callout callout-warning">
                <div class="callout-header">
                    <h6 class="callout-title">Resultado de Caixa</h6>
                    <i class="fas fa-cash-register callout-icon"></i>
                </div>
                <p class="callout-value">R$ {{ resultado_caixa|default:"0"|floatformat:2 }}</p>
            </div>
        </div>

        <div class="col-xl-3 col-md-6">
            <div class="callout callout-warning">
                <div class="callout-header">
                    <h6 class="callout-title">Variação do Rebanho</h6>
                    <i class="fas fa-exchange-alt callout-icon"></i>
                </div>
                <p class="callout-value">{{ variacao_rebanho|default:"0" }}</p>
            </div>
        </div>

        <div class="col-xl-3 col-md-6">
            <div class="callout callout-warning">
                <div class="callout-header">
                    <h6 class="callout-title">Variação dos Insumos</h6>
                    <i class="fas fa-boxes callout-icon"></i>
                </div>
                <p class="callout-value">{{ variacao_insumos|default:"0" }}</p>
            </div>
        </div>

        <div class="col-xl-3 col-md-6">
            <div class="callout callout-warning">
                <div class="callout-header">
                    <h6 class="callout-title">Resultado Final</h6>
                    <i class="fas fa-calculator callout-icon"></i>
                </div>
                <p class="callout-value">R$ {{ resultado_final|default:"0"|floatformat:2 }}</p>
            </div>
        </div>
    </div>
</div>

<!-- 5. Indicadores de Área e Custos -->
<div class="indicator-section">
    <h5 class="indicator-section-title">Indicadores de Área e Custos</h5>
    <div class="row">
        <div class="col-xl-3 col-md-6">
            <div class="callout callout-danger">
                <div class="callout-header">
                    <h6 class="callout-title">Área de Produção</h6>
                    <i class="fas fa-map callout-icon"></i>
                </div>
                <p class="callout-value">{{ area_producao|default:"0" }} ha</p>
            </div>
        </div>

        <div class="col-xl-3 col-md-6">
            <div class="callout callout-danger">
                <div class="callout-header">
                    <h6 class="callout-title">Resultado ha/ano</h6>
                    <i class="fas fa-chart-area callout-icon"></i>
                </div>
                <p class="callout-value">R$ {{ resultado_ha_ano|default:"0"|floatformat:2 }}</p>
            </div>
        </div>

        <div class="col-xl-3 col-md-6">
            <div class="callout callout-danger">
                <div class="callout-header">
                    <h6 class="callout-title">Desembolso/cab/mês</h6>
                    <i class="fas fa-coins callout-icon"></i>
                </div>
                <p class="callout-value">R$ {{ desembolso_cab_mes|default:"0"|floatformat:2 }}</p>
            </div>
        </div>

        <div class="col-xl-3 col-md-6">
            <div class="callout callout-danger">
                <div class="callout-header">
                    <h6 class="callout-title">Participação Insumos</h6>
                    <i class="fas fa-percentage callout-icon"></i>
                </div>
                <p class="callout-value">{{ participacao_insumos|default:"0" }}%</p>
            </div>
        </div>

        <div class="col-xl-3 col-md-6">
            <div class="callout callout-danger">
                <div class="callout-header">
                    <h6 class="callout-title">Desembolso por @ Produzida</h6>
                    <i class="fas fa-money-bill-wave callout-icon"></i>
                </div>
                <p class="callout-value">R$ {{ desembolso_arroba_produzida|default:"0"|floatformat:2 }}</p>
            </div>
        </div>

        <div class="col-xl-3 col-md-6">
            <div class="callout callout-danger">
                <div class="callout-header">
                    <h6 class="callout-title">Valor médio de Venda</h6>
                    <i class="fas fa-tag callout-icon"></i>
                </div>
                <p class="callout-value">R$ {{ valor_medio_venda|default:"0"|floatformat:2 }}</p>
            </div>
        </div>

        <div class="col-xl-3 col-md-6">
            <div class="callout callout-danger">
                <div class="callout-header">
                    <h6 class="callout-title">Resultado por @ Produzida</h6>
                    <i class="fas fa-calculator callout-icon"></i>
                </div>
                <p class="callout-value">R$ {{ resultado_arroba_produzida|default:"0"|floatformat:2 }}</p>
            </div>
        </div>

        <div class="col-xl-3 col-md-6">
            <div class="callout callout-danger">
                <div class="callout-header">
                    <h6 class="callout-title">Margem sobre a venda</h6>
                    <i class="fas fa-percentage callout-icon"></i>
                </div>
                <p class="callout-value">{{ margem_venda|default:"0" }}%</p>
            </div>
        </div>

        <div class="col-xl-3 col-md-6">
            <div class="callout callout-danger">
                <div class="callout-header">
                    <h6 class="callout-title">% Desembolso sobre @ produzida</h6>
                    <i class="fas fa-percentage callout-icon"></i>
                </div>
                <p class="callout-value">{{ percentual_desembolso_arroba|default:"0" }}%</p>
            </div>
        </div>
    </div>
</div>

<!-- 6. Categorias Específicas -->
<div class="indicator-section">
    <h5 class="indicator-section-title">Categorias Específicas</h5>
    <div class="row">
        <div class="col-xl-3 col-md-6">
            <div class="callout callout-dark">
                <div class="callout-header">
                    <h6 class="callout-title">Confinamento</h6>
                    <i class="fas fa-warehouse callout-icon"></i>
                </div>
                <p class="callout-value">{{ confinamento|default:"0" }}</p>
            </div>
        </div>

        <div class="col-xl-3 col-md-6">
            <div class="callout callout-dark">
                <div class="callout-header">
                    <h6 class="callout-title">Nutrição</h6>
                    <i class="fas fa-utensils callout-icon"></i>
                </div>
                <p class="callout-value">{{ nutricao|default:"0" }}</p>
            </div>
        </div>

        <div class="col-xl-3 col-md-6">
            <div class="callout callout-dark">
                <div class="callout-header">
                    <h6 class="callout-title">Operacional</h6>
                    <i class="fas fa-cogs callout-icon"></i>
                </div>
                <p class="callout-value">{{ operacional|default:"0" }}</p>
            </div>
        </div>

        <div class="col-xl-3 col-md-6">
            <div class="callout callout-dark">
                <div class="callout-header">
                    <h6 class="callout-title">Valor Diária Confinamento</h6>
                    <i class="fas fa-dollar-sign callout-icon"></i>
                </div>
                <p class="callout-value">R$ {{ valor_diaria_confinamento|default:"0"|floatformat:2 }}</p>
            </div>
        </div>

        <div class="col-xl-3 col-md-6">
            <div class="callout callout-dark">
                <div class="callout-header">
                    <h6 class="callout-title">Desembolso @ Produzida Conf.</h6>
                    <i class="fas fa-money-bill-wave callout-icon"></i>
                </div>
                <p class="callout-value">R$ {{ desembolso_arroba_confinamento|default:"0"|floatformat:2 }}</p>
            </div>
        </div>
    </div>
</div>